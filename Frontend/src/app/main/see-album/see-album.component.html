<div class="container mt-4">
    <div class="album-header d-flex align-items-center mb-4" *ngIf="!isNotFound; else NotFound">
        <img [src]="album.imageUrl" alt="Cover" class="album-cover me-3" />
        <div>
            <h4>{{album.albumType}}</h4>
            <h1>
                {{ album.name }} 
                <span *ngIf="isOwnerOfAlbum" (click)="editDialogVisible = true">
                    <i class="pi pi-pencil icon"></i>
                </span>
            </h1> 
            <h5 id="tracks_in_album">
                {{album.numberOfTrack}} Tracks 
                <span class="ms-2" *ngIf="album.releaseDate">Release Date {{album.releaseDate}}</span>
            </h5>
        </div>
    </div>
    <ng-template #NotFound>
        <h1 class="text-center">Album Is Not Found</h1>
    </ng-template>
    <app-track-list></app-track-list>

    <p-dialog [(visible)]="editDialogVisible" [header]="'Edit Album'" [modal]="true" [closable]="true" [style]="{width: '500px'}">
        
        <div class="form-group mt-2">
            <input type="text" id="albumName" class="form-control" [(ngModel)]="editableAlbum.name" placeholder="Name"/>
        </div>

        <div class="mt-2">
            <p-calendar [(ngModel)]="editableAlbum.releaseDate" dateFormat="yy.mm.dd" [touchUI]="true"  placeholder="Release Date"/>
        </div>

        <div class="form-group">
            <label for="albumCover">Cover Image</label>
            <input type="file" id="albumCover" class="form-control" (change)="onFileChange($event)"/>
            <img *ngIf="previewImage" [src]="previewImage" alt="Cover Preview" class="img-thumbnail mt-2" style="max-width: 250px;"/>
        </div>
        
        <ng-template pTemplate="footer">
            <button type="button" class="btn btn-danger me-2" (click)="removeCover()">Remove Cover</button>
            <button type="button" class="btn btn-danger me-2" (click)="confirmDeletionOfAlbum()">Delete</button>
            <button type="button" class="btn btn-secondary me-2" (click)="editDialogVisible = false">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="saveChanges()">Save</button>
        </ng-template>
    </p-dialog>
</div>
<p-confirmDialog [style]="{width: '20vw'}"/>
