<div class="container mt-4">
    <div class="playlist-header d-flex align-items-center mb-4">
        <img [src]="playlist.imageUrl" alt="Cover" class="playlist-cover me-3" />
        <div>
            <h4>{{playlist.playlistType}}</h4>
            <h1>
                {{ playlist.name }} 
                <span *ngIf="isOwnerOfPlaylist" (click)="editDialogVisible = true">
                    <i class="pi pi-pencil icon"></i>
                </span>
            </h1> 
            <h5 id="tracks_in_playlist">{{playlist.numberOfTrack}} Tracks</h5>
        </div>
    </div>
    <div class="track-list">
        <div *ngFor="let track of tracks;  let i = index" class="track-item d-flex align-items-center p-2 mb-2 border-bottom">
            <p-button icon="pi pi-play" (click)="playTrack(i)" class="me-2"></p-button>
            <div class="flex-grow-1">
                <h5 class="track-title mb-1">{{ track.title }}</h5>
                <p class="track-artist mb-0">{{ track.author }}</p>
            </div>
            <span *ngIf="isOwnerOfPlaylist"><i class="pi pi-trash icon" style="color: red;" (click)="deleteTrackFromPlaylist(track.id)"></i></span>
        </div>
    </div>
    <p-dialog [(visible)]="editDialogVisible" [header]="'Edit Playlist'" [modal]="true" [closable]="true" [style]="{width: '500px'}">
        <ng-template pTemplate="footer">
            <button type="button" class="btn btn-secondary me-2" (click)="editDialogVisible = false">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="saveChanges()">Save</button>
        </ng-template>
    
        <div class="form-group mt-2">
            <input type="text" id="playlistName" class="form-control" [(ngModel)]="editablePlaylist.name" placeholder="Name"/>
        </div>
    
        <div class="form-group">
            <label for="playlistCover">Cover Image</label>
            <input type="file" id="playlistCover" class="form-control" (change)="onFileChange($event)"/>
            <img *ngIf="previewImage" [src]="previewImage" alt="Cover Preview" class="img-thumbnail mt-2" style="max-width: 250px;"/>
        </div>
    </p-dialog>
</div>
